{{- if or (eq .chezmoi.os "darwin") (eq .chezmoi.os "linux") -}}
#!/bin/bash
# Generate bob shell completions for fish

set -e

FISH_COMPLETIONS_DIR="${HOME}/.config/fish/completions"

# Find bob - check common locations
if command -v bob &>/dev/null; then
    BOB="bob"
elif [ -x "/opt/homebrew/bin/bob" ]; then
    BOB="/opt/homebrew/bin/bob"
elif [ -x "${HOME}/.local/bin/bob" ]; then
    BOB="${HOME}/.local/bin/bob"
else
    echo "⚠ bob not found, skipping completions"
    exit 0
fi

mkdir -p "$FISH_COMPLETIONS_DIR"

echo ">>> Generating bob fish completions..."
"$BOB" complete fish > "${FISH_COMPLETIONS_DIR}/bob.fish"

echo "✓ bob fish completions installed"
{{ end -}}
